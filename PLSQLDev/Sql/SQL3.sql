dorm350;
dorm360;

SELECT DORM_JOIN_PSN_NO, GRNT_AMT_RECIV_AMT, JOIN_AMT_RECIV_AMT , 
       ( SELECT '거주 또는 재입사'
          FROM DORM300
         WHERE DORM_FG          = 'F010900001'
           AND SCHYY            = '2020'
           AND SHTM_FG          = DECODE('U000200002','U000200002','U000200001','0')
           AND DETA_SHTM_FG     = DECODE('U000300001','U000300001','U000300001','0')
           AND DORM_JOIN_ST_FG  IN ('F010200001','F010200007')
           AND DORM_JOIN_PSN_NO = a.DORM_JOIN_PSN_NO ) AS CHK,
       a.*
FROM dorm315 a
WHERE dorm_fg = 'F010900001'
AND schyy = '2020'
AND shtm_fg = 'U000200002'
AND deta_shtm_fg = 'U000300001'
AND ( NVL(GRNT_AMT_RECIV_AMT,0) < 100 OR NVL(JOIN_AMT_RECIV_AMT,0) < 100 )
;


SELECT DORM_JOIN_PSN_NO, JOIN_AMT, DORM_ROOM_CD, 
       ( SELECT dorm_join_amt_cd FROM dorm150 WHERE dorm_join_amt_cd = a.DORM_ROOM_CD ), 
       a.*
FROM dorm360 a
WHERE dorm_fg = 'F010900001'
AND schyy = '2020'
AND shtm_fg = 'U000200002'
AND deta_shtm_fg = 'U000300001'
--AND NVL(JOIN_AMT,0) < 100
--AND DORM_JOIN_PSN_NO = '2017-19511'
;

 

SELECT * FROM dorm200 WHERE DORM_JOIN_PSN_NO = '2017-19511' ;
SELECT * FROM dorm300 WHERE DORM_JOIN_PSN_NO = '2017-19511' ;


SELECT * FROM dorm150
WHERE dorm_dong_fg='GD014'
AND DORM_JOIN_AMT_CD = 'G6591' 
;

 WHERE DORM_DONG_CD = 'G6591' ;

SELECT * FROM dorm150 WHERE DORM_JOIN_AMT_CD LIKE '_' || '01' || '%';

SELECT * FROM dorm150 WHERE DORM_JOIN_AMT_CD = 'G6591' ;

SELECT * FROM dorm115 
WHERE DORM_ROOM_CD = 'G6591' ;

--G6591

SELECT * FROM dorm110  
WHERE DORM_DONG_CD = 'GD014' ;
;



SELECT *
  FROM DORM300
 WHERE DORM_FG          = 'F010900001'
   AND SCHYY            = '2020'
   AND SHTM_FG          = DECODE('U000200002','U000200002','U000200001','0')
   AND DETA_SHTM_FG     = DECODE('U000300001','U000300001','U000300001','0')
   AND DORM_JOIN_ST_FG  IN ('F010200001','F010200007')
   AND DORM_JOIN_PSN_NO = '2018-17565'
;

-- 모집단위
SELECT * FROM ESIN520 WHERE select_yy = '2020' 
AND APLY_COLL_UNIT_CD = '105'
;          

SELECT * FROM ESIN521 WHERE COLL_UNIT_NO = '20200101011502100105' ;          -- 성적기준정보
SELECT * FROM ESIN530 WHERE COLL_UNIT_NO = '20200101011502100105';          -- 세부전공관리
SELECT * FROM ESIN523 WHERE COLL_UNIT_NO = '20200101011502100105';          -- 동점자우선순위

SELECT * FROM ESIN521 WHERE COLL_UNIT_NO = '20180101011502100107' ;          -- 성적기준정보
SELECT * FROM ESIN530 WHERE COLL_UNIT_NO = '20180101011502100107';          -- 세부전공관리
SELECT * FROM ESIN523 WHERE COLL_UNIT_NO = '20180101011502100107';          -- 동점자우선순위

SELECT * FROM ESIN521 WHERE coll_unit_no LIKE '2020' || '%' ;          -- 성적기준정보
SELECT * FROM ESIN604 WHERE exam_no = '14001' AND coll_unit_no  = '20200101011502810811A';

SELECT * FROM BSNS011 WHERE grp_cd = 'U0266' ; --cmmn_cd = 'U027200002' ;
SELECT * FROM BSNS011 WHERE grp_cd = 'U0271' ; --cmmn_cd = 'U027200002' ;


SELECT CASE WHEN NVL(200,0) <= SUM(NVL(SELECT_ELEMNT_FMAK_SCOR,0)) THEN NULL
            ELSE '[ 수험번호 : ' || MAX('1') || ' ] 점수 : ' || SUM(NVL('200',0)) || ' / 만점기준( ' || SUM(NVL(SELECT_ELEMNT_FMAK_SCOR,0)) || ' ) ] 성적기준정보 만점값 초과.' END AS INFO
  FROM ESIN521
 WHERE COLL_UNIT_NO = '20200101011502810811A'
   AND ADPT_STG_FG = 'U027200003'
   AND SELECT_ELEMNT_FG = 'U027100007' 
   AND NVL(SELECT_ELEMNT_USE_YN,'N') = 'Y'
;


-- proc02
SP_ESIN604_ENG_CREA ;
-- proc02_1
SP_ESIN604_ENG_CHK ;

-- proc01
SP_ESIN604_OTH_CREA ;
-- proc01_1
SP_ESIN604_OTH_CHK ;




/* ESIN521 find10 성적기준정보 만점값 검증 */ 
SELECT CASE WHEN SUM(NVL(NULL,0)) <= SUM(NVL(SELECT_ELEMNT_FMAK_SCOR,0)) 
THEN NULL ELSE '[ 수험번호 : ' || MAX('14001') || ' ] : ' || SUM(NVL(NULL,0)) || ' / ' || SUM(NVL(SELECT_ELEMNT_FMAK_SCOR,0)) 
|| ' ] 성적기준정보 만점값 초과.' END AS INFO FROM ESIN521 WHERE COLL_UNIT_NO = '20200101011502810811A' 
AND ADPT_STG_FG = 'U027200003' AND SELECT_ELEMNT_FG = 'U027100007'
